<div class="description-box w-75">
    <h6><b>Angular custom range component</b></h6><br>
    <p>
        Price values can be selected by dragging the bullet to the desired position. This is
        possible by getting the axis position (which is returned in px
        using Cdk Drag & Drop function from Angular Material)
        and then calculating its proportion to the given Min and Max values.
        This value is binded to its corresponding label.<br>
        Values can be also edited manually introducing the price by input.
        With the same logic we can get an 'x' px position by calculating the values
        with a simple rule of three.<br>
        To prevent bullets from crossing there are two different invisible axis
        with widths determined by each bullet position.
    </p>
</div>
<div class="container">
    <!-- RANGE ELEMENT -->
    <div class="parent" id="parent">
        <span *ngIf="!firstInputActive" #firstValueLabel id="firstValueLabel" class="mr-3" (click)="inputActive()">
            {{firstValue | number:'1.0-2'}}€
        </span>
        <input *ngIf="firstInputActive" type="number" #firstValueInput id="firstValueInput" name="firstValueInput"
            class="mr-3" (keydown.enter)="inputActive(true)"
            (keydown.enter)="changeBulletPosition(firstValueInput.value, true)" min="10" max="100"
            [(ngModel)]="firstValue">

        <div class="parent">

            <div class="range">
                <div class="first-boundary" [ngStyle]="{'width': getWidth(true)}">
                    <div class="second-boundary" [ngStyle]="{'width': getWidth(false), 'right': getSecondBoundaryPosition()}">
                        <!-- FIRST BULLET -->
                        <div class="bullet" #firstPointer id="firstPointer" cdkDragLockAxis="x"
                            cdkDragBoundary=".first-boundary" [cdkDragFreeDragPosition]="firstBulletDragPosition"
                            cdkDrag (cdkDragEnded)="getFirstBulletValue($event)"
                            (cdkDragMoved)="getFirstBulletValue($event)">
                        </div>
                        <!-- SECOND BULLET -->
                        <div class="bullet" #secondPointer id="secondPointer" cdkDragLockAxis="x"
                            cdkDragBoundary=".parent" [cdkDragFreeDragPosition]="secondBulletDragPosition"
                            cdkDrag (cdkDragEnded)="getSecondBulletValue($event)"
                            (cdkDragMoved)="getSecondBulletValue($event)">
                        </div>
                    </div>
            </div>
        </div>
        <span *ngIf="!secondInputActive" #secondValueLabel id="secondValueLabel" class="mr-3" (click)="inputActive()">
            {{secondValue | number:'1.0-2'}}€
        </span>
        <input *ngIf="secondInputActive" type="number" #secondValueInput id="secondValueInput" name="secondValueInput"
            class="mr-3" (keydown.enter)="inputActive(false)"
            (keydown.enter)="changeBulletPosition(secondValueInput.value, false)" min="10" max="100"
            [(ngModel)]="secondValue">

    </div>

</div>

<style>
    .description-box,
    p,
    h6,
    span {
        text-align: center;
        font-family: 'Montserrat', sans-serif;
        margin: 0 auto;
    }

    /* use sass inheritance */
    #parent {
        width: auto !important;
    }

    .parent {
        height: 12px;
        width: 200px;
        display: flex;
        align-items: center;
        position: relative;
    }

    .first-boundary {
        width: 200px;
        height: 12px;
        display: flex;
        align-items: center;
        position: relative;
        top: -4px;
    }

    .second-boundary {
        width: 200px;
        height: 12px;
        display: flex;
        align-items: center;
        position: relative;
        top: 0px;
        float: right;
        
    }

    .range {
        height: 3px;
        background-color: #000000;
        width: 200px;
    }

    .bullet {
        border-radius: 50%;
        width: 12px;
        height: 12px;
        background-color: #000000;
        position: absolute;
        top: 0;
        cursor: pointer;
    }

    .bullet:hover {
        height: 14px;

    }

    #firstPointer {
        background-color: red !important;
    }

    #secondPointer {}

    /* REMOVE ARROWS FROM NUMBER INPUTS*/
    /* Chrome, Safari, Edge, Opera */
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Firefox */
    input[type=number] {
        -moz-appearance: textfield;
    }
</style>